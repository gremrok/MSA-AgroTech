### <a name="_b7urdng99y53"></a>**Название: Выбор финального архитектурного решения для MVP системы мониторинга животноводства**
### <a name="_hjk0fkfyohdk"></a>**Автор: Терехин Алексей**
### <a name="_uanumrh8zrui"></a>**Дата: 27.12.2025**

**Проблема или возможность:**
Необходимо выбрать одно из двух архитектурных решений для реализации MVP системы мониторинга животноводства:

**Основное решение:** отдельная платформа с ферменными серверами

**Альтернативное решение:** Модуль существующей IoT-платформы (расширение текущей системы)

Бизнесу требуется обоснованный выбор, учитывающий не только технические аспекты, но и стратегические бизнес-цели.

**Критические требования:** Автономность ферм, задержка оповещений <5 сек

**Стратегическая цель:** Потенциальный запуск SaaS-продукта

# Критерии сравнения решений

|Категория|	Критерий|	Описание|	Вес (1-10)|
| :- | :- | :- | :- |
|Функциональность|	Соответствие требованиям автономности|	Способность системы работать без интернета|	10|
||Соответствие требованию по задержке оповещений|	<5 секунд от события до оповещения|	10|
||Готовность к расширению функционала	|Легкость добавления новых типов датчиков, аналитики|	8|
|Технические характеристики	|Производительность под нагрузкой|	Обработка 50+ видеопотоков на ферме	|9|
||Надежность и отказоустойчивость|	99,95% доступности|	9|
||Безопасность|	Modern auth, шифрование данных, разделение ролей|	8|
|Бизнес-аспекты|	Сроки реализации MVP|	Время до рабочего прототипа на 3 фермах	|9|
||Стоимость разработки и внедрения|	CAPEX и OPEX на 3 года|	8|
||Соответствие стратегической цели SaaS|	Возможность выделения в отдельный продукт|	9|
||Сложность интеграции с текущими системами|	Использование существующей Kafka, BI, ERP	|7|
|Операционные аспекты|	Сложность поддержки и эксплуатации|	Требования к штату DevOps, мониторинг	|8|
||Масштабируемость|	Рост до 50+ ферм, 1000+ камер	|8|
||Простота обновлений	|Обновление ПО на фермах, моделей ИИ|	7|

## Сравнительный анализ решений

### Решение 1: отдельная платформа
|Критерий|	Оценка (1-10)|	Обоснование|
|:-|:-|:-|
|Автономность|	10|	Полная автономная работа фермы: локальная обработка видео, база данных, бизнес-логика|
|Задержка оповещений	|10|	Локальная обработка → Redis Pub/Sub → <1 сек до оповещения|
|Расширяемость функционала|	9|	Чистая доменная архитектура, легко добавлять новые микросервисы|
|Производительность|	9|	Локальная обработка на ферме, распределение нагрузки|
|Надежность|	9|	Ферма независима от облака, облачные сервисы кластеризуются|
|Безопасность|	8|	Современная auth (OAuth2, JWT), но нужно дублировать инфраструктуру|
|Сроки MVP|	6|	8-10 месяцев: сложнее из-за ферменных серверов и синхронизации|
|Стоимость|	6|	Выше CAPEX (сервера на фермах) и OPEX (обслуживание распределенной системы)|
|Стратегия SaaS|	10|	Идеально: изначально проектировалась как отдельный продукт|
|Интеграция с текущими системами	|7|	Через Kafka события, но нужны дополнительные адаптеры|
|Сложность поддержки|	6|	Сложнее: мониторинг распределенной системы, обновления на фермах|
|Масштабируемость	|9|	Горизонтальное масштабирование и на ферме, и в облаке|
|Простота обновлений|	6|	Сложнее обновлять ПО на фермах, нужны механизмы rollout|
Итоговый балл (взвешенный): 8.1/10

### Решение 2: Модуль существующей IoT-платформы
|Критерий|	Оценка (1-10)|	Обоснование|
|:-|:-|:-|
|Автономность|	4|	Минимальная: только буферизация данных, нет локальной обработки видео|
|Задержка оповещений	|5|	Зависит от качества канала: видео → облако → обработка → оповещение|
|Расширяемость функционала|	7|	В рамках текущей платформы, может быть ограничено архитектурой|
|Производительность	|7|	Централизованная обработка, может быть bottleneck при росте|
|Надежность	|6|	Сильно зависит от канала связи с фермой|
|Безопасность	|9|	Использует существующую инфраструктуру auth|
|Сроки MVP	|9|	5-6 месяцев: переиспользуем готовые компоненты|
|Стоимость	|9|	Ниже: нет серверов на фермах, используем существующую инфраструктуру|
|Стратегия SaaS	|4|	Сложно выделить: сильная связь с внутренней архитектурой|
|Интеграция с текущими системами	|10|	Прямая интеграция: единый портал, единая БД|
|Сложность поддержки	|9|	Проще: централизованное управление|
|Масштабируемость	|6|	Масштабируется только облачная часть, канал связи - ограничение|
|Простота обновлений	|9|	Централизованные обновления в облаке|
Итоговый балл (взвешенный): 6.8/10

### Вывод:
Рекомендуется выбрать Решение 1:  отдельная платформа

**Обоснование:**

- Гарантированное выполнение критичных NFR: Система гарантированно обеспечивает автономность и задержку оповещений <5 секунд, что является ключевым требованием для животноводства. В Решении 2 эти требования находятся под большим риском из-за зависимости от качества интернет-соединения.

- Стратегическое соответствие бизнес-целям: Решение 1 изначально проектируется как потенциальный SaaS-продукт. Инвестиции в более сложную архитектуру окупятся при выходе на рынок B2B. Решение 2 создаст технический долг, который придется переписывать для SaaS.

- Устойчивость к реальным условиям: Учитывая нестабильный WiFi на фермах, Решение 1 продолжит работу и выдавать оповещения при полном отсутствии интернета. В Решении 2 система фактически перестанет выполнять свои основные функции.

- Долгосрочная экономическая эффективность: Хотя CAPEX выше, OPEX может быть сопоставим или ниже за счет:

    - Меньшей требовательности к каналу связи (дешевые тарифы)
    - Возможности монетизации как SaaS
    - Снижения операционных рисков (потери животных из-за поздних оповещений)
    - Компромиссы, которые мы принимаем:
    - Увеличение сроков MVP на 2-4 месяца
    - Более высокая начальная инвестиция

- Необходимость развивать компетенции в distributed systems

**Стратегия смягчения рисков:**

- **Поэтапный запуск:** Сначала реализовать core-функциональность на одной ферме
- **Использование готовых решений:** Docker, Kubernetes для упрощения развертывания на фермах
- **Партнерства:** Внешние подрядчики для non-core компонентов

### Заключение
- Решение 1 (SmartLivestock Platform) лучше соответствует долгосрочным бизнес-целям компании и гарантированно выполняет критические нефункциональные требования. Хотя оно требует больше времени и инвестиций на старте, эти инвестиции создают фундамент для будущего SaaS-продукта и обеспечивают надежную работу системы в реальных условиях ферм.

- Решение 2 может быть выбрано только если:

    - Требуется максимально быстрый MVP (демо для инвесторов)
    - Есть гарантии стабильного высокоскоростного интернета на всех фермах
    - Отказываются от идеи SaaS в пользу внутреннего решения

